        // --- DATA ---
        const defaultRoutine = [
            [{ time: "9:30 am - 12:20 pm", subject: "PHB102L-03 -DRJ-10D-22L", completed: false }, { time: "12:30 pm - 1:50 pm", subject: "PHB103-01 -TMZ-07F-24C", completed: false }, { time: "2:00 pm - 3:20 pm", subject: "PHB102-01 -DRJ-07F-24C", completed: false }, { time: "3:30 pm - 4:50 pm", subject: "PHB104-01 -DHY-07F-23C", completed: false }],
            [{ time: "9:30 am - 10:50 am", subject: "PHB101-01 -MRO-07F-25C", completed: false }],
            [{ time: "9:30 am - 12:20 pm", subject: "PHB104L-03 -GMAI-11F-34L", completed: false }, { time: "12:30 pm - 1:50 pm", subject: "PHB103-01 -TMZ-07F-24C", completed: false }, { time: "2:00 pm - 3:20 pm", subject: "PHB102-01 -DRJ-07F-24C", completed: false }, { time: "3:30 pm - 4:50 pm", subject: "PHB104-01 -DHY-07F-23C", completed: false }],
            [{ time: "9:30 am - 10:50 am", subject: "PHB101-01 -MRO-07F-25C", completed: false }],
            []
        ];

        // --- UPDATED: REMOTE MESSAGE LOGIC ---
        const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu"];
        
        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶∏‡¶æ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function getLoveNote(dayIdx) {
            const dayKey = dayNames[dayIdx];
            const cloudData = JSON.parse(localStorage.getItem('adminRewards')) || {};
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡ßá ‡¶ì‡¶á ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶•‡¶æ‡¶ï‡ßá ‡¶§‡¶¨‡ßá ‡¶∏‡ßá‡¶ü‡¶æ, ‡¶®‡¶æ‡¶π‡¶≤‡ßá ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
            return cloudData[dayKey] || "YAY! All tasks done! Proud of you! ‚ù§Ô∏è";
        }

        let currentRoutine = [];
        let activeDay = 0;
        let isEditing = false;

        window.onload = function() { 
            loadData(); 
            fetchSecretMessages(); // ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
            renderRoutine(); 
        };

        // --- RENDER ---
        function renderRoutine() {
            const container = document.getElementById("dynamic-content");
            container.innerHTML = "";

            const tasks = currentRoutine[activeDay];
            
            tasks.forEach((task, index) => {
                const card = document.createElement("div");
                card.className = "class-card";
                card.innerHTML = `
                    <div class="card-header">
                        <div class="time-box">${task.time}</div>
                        <input type="checkbox" class="class-check" onchange="toggleTask(${activeDay}, ${index})" ${task.completed ? "checked" : ""}>
                        <button class="delete-btn" onclick="deleteTask(${index})" style="display: ${isEditing ? 'block' : 'none'}">üóëÔ∏è</button>
                    </div>
                    <div class="subject-box">
                        <textarea 
                            onchange="updateSubject(${activeDay}, ${index}, this.value)" 
                            ${isEditing ? "" : "readonly"}>${task.subject}</textarea>
                    </div>
                `;
                container.appendChild(card);
            });

            const addBtn = document.createElement("button");
            addBtn.className = "add-class-btn";
            addBtn.innerText = "+ Add Time Slot";
            addBtn.onclick = addNewClass;
            addBtn.style.display = isEditing ? "block" : "none";
            container.appendChild(addBtn);

            // --- REWARD LOGIC FIX ---
            const allCompleted = tasks.length > 0 && tasks.every(t => t.completed);
            const rewardBox = document.createElement("div");
            rewardBox.className = "reward-box";
            
            const currentMessage = getLoveNote(activeDay); // ‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ú‡¶ø‡¶ï

            rewardBox.innerHTML = `
                <input type="checkbox" class="heart-checkbox" ${allCompleted ? "checked" : ""}>
                <div style="font-size:12px; margin-top:5px; color:#880e4f;">${allCompleted ? "Completed! üéâ" : "Tasks Locked üîí"}</div>
                <div id="rewardText" class="surprise-msg" style="display: ${allCompleted ? 'block' : 'none'}">${currentMessage}</div>
            `;
            container.appendChild(rewardBox);

            document.querySelectorAll(".tab-btn").forEach((btn, idx) => {
                btn.classList.toggle("active", idx === activeDay);
            });
        }

        // --- CLOUD FETCH FUNCTION ---
        const REMOTE_BIN_ID = "697a8010d0ea881f408e87d7"; 
        const REMOTE_API_KEY = "$2a$10$vhszPYO/HWMSbnMiDUcq7eIW6i8BecKgdG6QteMm/FPJ/22fP/VBS";

        async function fetchSecretMessages() {
            try {
                let response = await fetch(`https://api.jsonbin.io/v3/b/${REMOTE_BIN_ID}/latest`, {
                    headers: { 'X-Master-Key': REMOTE_API_KEY }
                });
                
                if (response.ok) {
                    let result = await response.json();
                    let data = result.record;

                    // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá‡¶∞ 'routine_obj' ‡¶ü‡¶æ‡¶ï‡ßá 'adminRewards' ‡¶®‡¶æ‡¶Æ‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶õ‡¶ø
                    if (data.routine_obj) {
                        localStorage.setItem('adminRewards', JSON.stringify(data.routine_obj));
                        renderRoutine(); // ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶≤‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶π‡¶¨‡ßá
                    }
                }
            } catch (error) { console.log("Offline mode or Fetch error"); }
        }
